<div class="profil-container">
  <h1>👤 Mon Profil</h1>
  
  <div class="profil-section">
    <h2>Informations personnelles</h2>
    <p><strong>Nom :</strong> {{ user.nom || 'Non défini' }}</p>
    <p><strong>Email :</strong> {{ user.email }}</p>
    <p><strong>Rôle :</strong> {{ user.role || 'Utilisateur'}}</p>
    <div style="text-align: center; margin-bottom: 20px;">
  <div 
  *ngIf="user.photoUrl; else defaultInitial" 
  style="text-align: center; margin-bottom: 20px;"
>
  <img 
    [src]="user.photoUrl" 
    alt="Photo de profil" 
    style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; box-shadow: 0 0 5px rgba(0,0,0,0.3);"
  >
</div>

<ng-template #defaultInitial>
  <div 
    style="width: 120px; height: 120px; border-radius: 50%; background-color: #ccc; 
           display: flex; align-items: center; justify-content: center; 
           font-size: 48px; font-weight: bold; color: white; 
           margin: auto; margin-bottom: 20px; box-shadow: 0 0 5px rgba(0,0,0,0.3);"
  >
    {{ getInitial() }}
  </div>
</ng-template>

</div>

  </div>

  <div class="profil-section">
    <h2>Paramètres</h2>
    <div class="buttons-group">
  <button (click)="openEditModal()">⚙️ Modifier mes informations</button>
  <label class="upload-button">
    📸 Changer la photo
    <input type="file" accept="image/*" (change)="onPhotoSelected($event)" hidden>
  </label>
</div>

    <button (click)="openPasswordModal()">🔐 Changer mon mot de passe</button>
    <div class="theme-toggle">
      <span>🎨 Thème :</span>
      <label class="switch">
        <input type="checkbox" [checked]="isDarkTheme" (change)="toggleTheme()">
        <span class="slider round"></span>
      </label>
      <span>{{ isDarkTheme ? 'Sombre' : 'Clair' }}</span>
    </div>
  </div>
</div>

<!-- Modals -->
<app-edit-profil-modal 
  *ngIf="showEditModal"
  [user]="user"
  (closed)="showEditModal = false"
  (saved)="updateUser($event)">
</app-edit-profil-modal>
<app-change-password-modal 
  *ngIf="showPasswordModal"
  (closed)="showPasswordModal = false"
  (passwordChanged)="changePassword($event)">
</app-change-password-modal>