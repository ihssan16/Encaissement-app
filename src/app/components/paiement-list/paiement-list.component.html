<div class="list-container">
  <div class="list-header">
    <h2>Liste des paiements</h2>
    <button class="btn btn-primary" routerLink="/ajouter">
      <i class="icon-plus"></i>
      Ajouter un paiement
    </button>
  </div>

  <div class="search-bar">
    <input 
      type="text" 
      [(ngModel)]="searchTerm" 
      (input)="onSearchChange()"
      placeholder="üîç Rechercher un paiement..." 
    /> 
  </div>

  <!-- Informations sur la pagination -->
  <div class="pagination-info" *ngIf="totalItems > 0">
    <span>
      Affichage de {{ startIndex }} √† {{ endIndex }} sur {{ totalItems }} paiements
    </span>
    
    <!-- S√©lecteur du nombre d'√©l√©ments par page -->
    <div class="items-per-page">
      <label>√âl√©ments par page:</label>
      <select [(ngModel)]="itemsPerPage" (change)="onItemsPerPageChange(itemsPerPage)">
        <option *ngFor="let size of pageSizeOptions" [value]="size">
          {{ size }}
        </option>
      </select>
    </div>
  </div>

  <div class="table-container">
    <table class="payments-table">
      <thead>
        <tr>
          <th>Client</th>
          <th>Montant</th>
          <th>Moyen</th>
          <th>Date</th>
          <th>Service pay√©</th>
          <th>Facult√©</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Utiliser paiementsPagines au lieu de paiementsFiltres -->
        <tr *ngFor="let paiement of paiementsPagines; let i = index"
            [class.even]="i % 2 === 0"
            [class.odd]="i % 2 !== 0">
          <td>
            <div class="client-info">
              <strong>{{ paiement.client }}</strong>
            </div>
          </td>
          <td>
            <div class="amount">
              {{ paiement.montant | number:'1.2-2' }}MAD
            </div>
          </td>
          <td>
            <span class="payment-method" [class]="'method-' + paiement.moyen">
              {{ paiement.moyen }}
            </span>
          </td>
          <td>
            <div class="date">
              {{ paiement.date | date: 'dd/MM/yyyy HH:mm' }}
            </div>
          </td>
          <td>
            <div class="description">
              {{ paiement.description || '-' }}
            </div>
          </td>
          <td>
            <div class="faculte">
              {{ paiement.faculte || '-' }}
            </div>
          </td>
          <td>
            <div class="actions">
              <button class="btn btn-edit"
                      (click)="modifierPaiement(paiement._id)"
                      title="Modifier" 
                      routerLink="modifier/:id">
                <i class="icon-edit"></i>
                Modifier
              </button>
              <button class="btn btn-delete"
                      (click)="supprimerPaiement(paiement._id)"
                      title="Supprimer">
                <i class="icon-delete"></i>
                Supprimer
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Message si aucun paiement -->
    <div *ngIf="paiements.length === 0" class="empty-state">
      <div class="empty-icon">üìã</div>
      <h3>Aucun paiement trouv√©</h3>
      <p>Commencez par ajouter votre premier paiement</p>
      <button class="btn btn-primary" routerLink="/ajouter">
        Ajouter un paiement
      </button>
    </div>

    <!-- Message si aucun r√©sultat de recherche -->
    <div *ngIf="paiements.length > 0 && paiementsFiltres.length === 0" class="no-results">
      <div class="empty-icon">üîç</div>
      <h3>Aucun r√©sultat trouv√©</h3>
      <p>Essayez de modifier votre recherche</p>
    </div>
  </div>

  <!-- Contr√¥les de pagination -->
  <div class="pagination-controls" *ngIf="totalPages > 1">
    <div class="pagination-nav">
      <!-- Bouton pr√©c√©dent -->
      <button 
        class="btn btn-pagination" 
        (click)="previousPage()" 
        [disabled]="currentPage === 1"
        title="Page pr√©c√©dente">
        ‚Äπ Pr√©c√©dent
      </button>

      <!-- Num√©ros de pages -->
      <div class="page-numbers">
        <!-- Premi√®re page si pas visible -->
        <button 
          *ngIf="getPageNumbers()[0] > 1"
          class="btn btn-page-number" 
          (click)="goToPage(1)">
          1
        </button>
        
        <!-- Points de suspension si n√©cessaire -->
        <span *ngIf="getPageNumbers()[0] > 2" class="page-dots">...</span>

        <!-- Pages visibles -->
        <button 
          *ngFor="let page of getPageNumbers()" 
          class="btn btn-page-number"
          [class.active]="page === currentPage"
          (click)="goToPage(page)">
          {{ page }}
        </button>

        <!-- Points de suspension si n√©cessaire -->
        <span *ngIf="getPageNumbers()[getPageNumbers().length - 1] < totalPages - 1" 
              class="page-dots">...</span>

        <!-- Derni√®re page si pas visible -->
        <button 
          *ngIf="getPageNumbers()[getPageNumbers().length - 1] < totalPages"
          class="btn btn-page-number" 
          (click)="goToPage(totalPages)">
          {{ totalPages }}
        </button>
      </div>

      <!-- Bouton suivant -->
      <button 
        class="btn btn-pagination" 
        (click)="nextPage()" 
        [disabled]="currentPage === totalPages"
        title="Page suivante">
        Suivant ‚Ä∫
      </button>
    </div>

    <!-- Informations de pagination -->
    <div class="pagination-summary">
      Page {{ currentPage }} sur {{ totalPages }}
    </div>
  </div>
</div>